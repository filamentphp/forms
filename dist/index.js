(()=>{function b(n){n.directive("mask",(t,{value:e,expression:u},{effect:f,evaluateLater:c})=>{let r=()=>u,i="";queueMicrotask(()=>{if(["function","dynamic"].includes(e)){let o=c(u);f(()=>{r=a=>{let s;return n.dontAutoEvaluateFunctions(()=>{o(p=>{s=typeof p=="function"?p(a):p},{scope:{$input:a,$money:I.bind({el:t})}})}),s},l(t,!1)})}else l(t,!1);t._x_model&&t._x_model.set(t.value)}),t.addEventListener("input",()=>l(t)),t.addEventListener("blur",()=>l(t,!1));function l(o,a=!0){let s=o.value,p=r(s);if(!p||p==="false")return!1;if(i.length-o.value.length===1)return i=o.value;let m=()=>{i=o.value=d(s,p)};a?k(o,p,()=>{m()}):m()}function d(o,a){if(o==="")return"";let s=g(a,o);return h(a,s)}}).before("model")}function k(n,t,e){let u=n.selectionStart,f=n.value;e();let c=f.slice(0,u),r=h(t,g(t,c)).length;n.setSelectionRange(r,r)}function g(n,t){let e=t,u="",f={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},c="";for(let r=0;r<n.length;r++){if(["9","a","*"].includes(n[r])){c+=n[r];continue}for(let i=0;i<e.length;i++)if(e[i]===n[r]){e=e.slice(0,i)+e.slice(i+1);break}}for(let r=0;r<c.length;r++){let i=!1;for(let l=0;l<e.length;l++)if(f[c[r]].test(e[l])){u+=e[l],e=e.slice(0,l)+e.slice(l+1),i=!0;break}if(!i)break}return u}function h(n,t){let e=Array.from(t),u="";for(let f=0;f<n.length;f++){if(!["9","a","*"].includes(n[f])){u+=n[f];continue}if(e.length===0)break;u+=e.shift()}return u}function I(n,t=".",e,u=2){if(n==="-")return"-";if(/^\D+$/.test(n))return"9";e=e??(t===","?".":",");let f=(l,d)=>{let o="",a=0;for(let s=l.length-1;s>=0;s--)l[s]!==d&&(a===3?(o=l[s]+d+o,a=0):o=l[s]+o,a++);return o},c=n.startsWith("-")?"-":"",r=n.replaceAll(new RegExp(`[^0-9\\${t}]`,"g"),""),i=Array.from({length:r.split(t)[0].length}).fill("9").join("");return i=`${c}${f(i,e)}`,u>0&&n.includes(t)&&(i+=`${t}`+"9".repeat(u)),queueMicrotask(()=>{this.el.value.endsWith(t)||this.el.value[this.el.selectionStart-1]===t&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),i}var v=b;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(v)});})();
